# é˜¶æ®µäºŒï¼šBossæ ¸å¿ƒåŠŸèƒ½é…ç½®æŒ‡å—

> **ç›®æ ‡ï¼š** è®©Bossèƒ½è¿½ç©å®¶ã€æ‰“ç©å®¶ã€æ ¹æ®è¡€é‡åˆ‡æ¢é˜¶æ®µ  
> **é¢„è®¡æ—¶é—´ï¼š** 1-2å°æ—¶ï¼ˆä¸»è¦æ˜¯Unityç¼–è¾‘å™¨æ“ä½œï¼‰

---

## ğŸ“‹ ä»»åŠ¡æ¸…å•

- [ ] 2.1 ä¸ºBossæ·»åŠ BossPhaseManager
- [ ] 2.2 ä¸ºBossæ·»åŠ BossMovement
- [ ] 2.3 ä¸ºBossæ·»åŠ MeleeAttack
- [ ] 2.4 æµ‹è¯•å®Œæ•´æˆ˜æ–—æµç¨‹

---

## 2.1 ä¸ºBossæ·»åŠ BossPhaseManager

1. åœ¨Hierarchyä¸­é€‰æ‹© `Boss` GameObject
2. Add Component â†’ æœç´¢ `BossPhaseManager` â†’ æ·»åŠ 
3. é…ç½®å‚æ•°ï¼š
   - **Show Debug Logs**: âœ… å‹¾é€‰ï¼ˆæ–¹ä¾¿è°ƒè¯•ï¼‰

**ä½œç”¨ï¼š** ç›‘å¬Bossè¡€é‡å˜åŒ–ï¼Œè‡ªåŠ¨åˆ¤æ–­å½“å‰é˜¶æ®µï¼ˆ1/2/3ï¼‰ï¼Œè§¦å‘é˜¶æ®µå˜åŒ–äº‹ä»¶ã€‚

é˜¶æ®µç”± BossData ä¸­é…ç½®çš„é˜ˆå€¼å†³å®šï¼š
- 100%-70% â†’ é˜¶æ®µ1
- 70%-40% â†’ é˜¶æ®µ2
- 40%-0% â†’ é˜¶æ®µ3

---

## 2.2 ä¸ºBossæ·»åŠ BossMovement

1. é€‰æ‹© `Boss` GameObject
2. Add Component â†’ æœç´¢ `BossMovement` â†’ æ·»åŠ 
3. é…ç½®å‚æ•°ï¼š

**ç›®æ ‡å¼•ç”¨ï¼š**
- **Target**: å°†Hierarchyä¸­çš„ `Player` GameObjectæ‹–åˆ°è¿™é‡Œ

**è¡Œä¸ºè®¾ç½®ï¼š**
- âœ… **Flip Sprite**: å‹¾é€‰ï¼ˆBossé¢æœç©å®¶æ—¶ç¿»è½¬ï¼‰
- **Stopping Distance**: `1.5`ï¼ˆåˆ°è¾¾ç©å®¶å¤šè¿‘æ—¶åœä¸‹ï¼‰

**å·¡é€»è®¾ç½®ï¼š**
- âœ… **Enable Patrol**: å‹¾é€‰
- **Patrol Range**: `3`ï¼ˆå·¡é€»èŒƒå›´ï¼‰
- **Patrol Wait Time**: `2`ï¼ˆåˆ°è¾¾è¾¹ç•Œåç­‰å¾…æ—¶é—´ï¼‰

**åœ°é¢æ£€æµ‹ï¼š**
- **Ground Check Distance**: `0.3`
- **Ground Layer**: é€‰æ‹© `Ground` å±‚ï¼ˆâš ï¸ ç¦æ­¢ä½¿ç”¨ Nothing æˆ– Everythingï¼Œä¸ GroundChecker ä¿æŒä¸€è‡´ï¼‰

**è°ƒè¯•ï¼š**
- **Show Debug Logs**: âœ… å‹¾é€‰

**æ³¨æ„ï¼š** Move Speed å’Œ Jump Force ç•™ `0` å³å¯ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ BossData ä¸­çš„å€¼ã€‚

---

## 2.3 ä¸ºBossæ·»åŠ MeleeAttack

MeleeAttack å¯ä»¥ä½œä¸ºBossçš„**å­å¯¹è±¡**æˆ–ç›´æ¥æŒ‚åœ¨Bossä¸Šã€‚æ¨èåˆ›å»ºå­å¯¹è±¡ï¼Œæ–¹ä¾¿ä»¥åæ·»åŠ å¤šä¸ªæ”»å‡»ã€‚

### æ–¹æ³•1ï¼šç›´æ¥æŒ‚åœ¨Bossä¸Šï¼ˆç®€å•ï¼‰

1. é€‰æ‹© `Boss` GameObject
2. Add Component â†’ æœç´¢ `MeleeAttack` â†’ æ·»åŠ 
3. é…ç½®å‚æ•°ï¼š

### æ–¹æ³•2ï¼šåˆ›å»ºæ”»å‡»å­å¯¹è±¡ï¼ˆæ¨èï¼‰

1. åœ¨Hierarchyä¸­å³é”®ç‚¹å‡» `Boss` â†’ `Create Empty`
2. å‘½åä¸º `Attacks`
3. åœ¨ `Attacks` ä¸‹å³é”® â†’ `Create Empty`
4. å‘½åä¸º `MeleeAttack`
5. é€‰æ‹© `MeleeAttack` GameObject
6. Add Component â†’ æœç´¢ `MeleeAttack` â†’ æ·»åŠ 

### é…ç½®MeleeAttackå‚æ•°

**æ”»å‡»åŸºç¡€è®¾ç½®ï¼š**
- **Attack Name**: `Melee Attack`
- **Damage**: `20`ï¼ˆæ”»å‡»ä¼¤å®³ï¼‰
- **Cooldown Time**: `2`ï¼ˆå†·å´æ—¶é—´ï¼Œç§’ï¼‰
- **Attack Duration**: `0.5`ï¼ˆæ”»å‡»æŒç»­æ—¶é—´ï¼‰

**èŒƒå›´è®¾ç½®ï¼š**
- **Min Range**: `0`ï¼ˆæœ€å°æ”»å‡»è·ç¦»ï¼‰
- **Max Range**: `2.5`ï¼ˆæœ€å¤§æ”»å‡»è·ç¦»ï¼Œè¶…è¿‡æ­¤è·ç¦»ä¸ä¼šæ”»å‡»ï¼‰

**é˜¶æ®µé™åˆ¶ï¼š**
- **Available In Phases**: ä¿æŒé»˜è®¤ `[1, 2, 3]`ï¼ˆæ‰€æœ‰é˜¶æ®µéƒ½å¯ç”¨ï¼‰

**è¿‘æˆ˜æ”»å‡»è®¾ç½®ï¼š**
- **Attack Offset**: `(1, 0)`ï¼ˆæ”»å‡»æ£€æµ‹åç§»ï¼ŒBosså‰æ–¹1å•ä½ï¼‰
- **Attack Radius**: `1.5`ï¼ˆæ”»å‡»æ£€æµ‹åŠå¾„ï¼‰
- **Target Layer**: é€‰æ‹© Player æ‰€åœ¨çš„å±‚ï¼ˆé¿å…ä½¿ç”¨ Everythingï¼Œé˜²æ­¢è¯¯ä¼¤éç›®æ ‡å¯¹è±¡ï¼‰
- **Target Tag**: `Player`

**å‡»é€€è®¾ç½®ï¼š**
- **Knockback Force**: `5`ï¼ˆå‡»é€€åŠ›åº¦ï¼‰

**è°ƒè¯•ï¼š**
- **Show Debug Logs**: âœ… å‹¾é€‰

---

## 2.4 æµ‹è¯•å®Œæ•´æˆ˜æ–—æµç¨‹

### æ­¥éª¤1ï¼šç¡®ä¿Playeræœ‰Tag

- é€‰æ‹© Player â†’ Inspector é¡¶éƒ¨ Tag â†’ é€‰æ‹© `Player`

### æ­¥éª¤2ï¼šç¡®ä¿Bossä¸Šæœ‰BossTestHelper

å¦‚æœä¹‹å‰å·²ç»æ·»åŠ äº† BossTestHelperï¼ˆæŒ‰Bé”®å¼€å§‹æˆ˜æ–—ï¼‰ï¼Œç›´æ¥ä½¿ç”¨ã€‚

### æ­¥éª¤3ï¼šè¿è¡Œæµ‹è¯•

1. ç‚¹å‡» Play
2. æŒ‰ `B` é”®å¼€å§‹Bossæˆ˜æ–—
3. è§‚å¯Ÿä»¥ä¸‹è¡Œä¸ºï¼š

**Bossåº”è¯¥ï¼š**
- å¼€å§‹è¿½é€ç©å®¶ï¼ˆå‘ç©å®¶ç§»åŠ¨ï¼‰
- åˆ°è¾¾ç©å®¶é™„è¿‘ååœä¸‹
- æ¯éš”2ç§’å‘åŠ¨ä¸€æ¬¡è¿‘æˆ˜æ”»å‡»
- å¦‚æœæ”»å‡»å‘½ä¸­ç©å®¶ï¼Œç©å®¶ä¼šå—ä¼¤+é—ªçƒ+è¢«å‡»é€€
- Bossé¢æœç©å®¶æ–¹å‘ç¿»è½¬Sprite

**é˜¶æ®µå˜åŒ–æµ‹è¯•ï¼š**
- æŒ‰ `J` é”®å¯¹Bossé€ æˆä¼¤å®³ï¼ˆå¦‚æœæœ‰HealthTestHelperï¼‰
- æˆ–è€…åœ¨åœºæ™¯ä¸­æ”¾ç½®DamageZoneè®©Bosså—ä¼¤
- Bossè¡€é‡é™åˆ°70%ä»¥ä¸‹æ—¶ï¼ŒConsoleæ˜¾ç¤ºé˜¶æ®µå˜åŒ–
- Bossè¡€é‡é™åˆ°40%ä»¥ä¸‹æ—¶ï¼Œå†æ¬¡æ˜¾ç¤ºé˜¶æ®µå˜åŒ–
- é˜¶æ®µè¶Šé«˜ï¼ŒBossç§»åŠ¨é€Ÿåº¦è¶Šå¿«ï¼ˆæ¯é˜¶æ®µ+20%ï¼‰

### æ­¥éª¤4ï¼šéªŒè¯Consoleæ—¥å¿—

åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹æ—¥å¿—ï¼š
```
Test Boss: Battle started!
Test Boss: Move state changed from Idle to Chase
Test Boss: Selected attack: Melee Attack
Test Boss: Melee Attack started!
Test Boss: Melee Attack hit Player for 20 damage!
Test Boss: HP 350/500 (70%), Phase 2
Test Boss: Phase changed from 1 to 2
```

---

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] Bossæœ‰BossPhaseManagerç»„ä»¶
- [ ] Bossæœ‰BossMovementç»„ä»¶ï¼ŒTargetæŒ‡å‘Player
- [ ] Bossæœ‰MeleeAttackç»„ä»¶ï¼ˆç›´æ¥æŒ‚æˆ–å­å¯¹è±¡ä¸Šï¼‰
- [ ] æŒ‰Bé”®Bosså¼€å§‹è¿½é€ç©å®¶
- [ ] Bossåœ¨è¿‘è·ç¦»æ—¶æ”»å‡»ç©å®¶
- [ ] ç©å®¶å—åˆ°ä¼¤å®³å¹¶è¢«å‡»é€€
- [ ] Bossè¡€é‡é™ä½æ—¶é˜¶æ®µè‡ªåŠ¨åˆ‡æ¢
- [ ] Consoleæ— é”™è¯¯ä¿¡æ¯

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q: Bossä¸è¿½ç©å®¶ï¼Ÿ

1. æ£€æŸ¥BossMovementçš„Targetæ˜¯å¦æŒ‡å‘Player
2. æ£€æŸ¥æ˜¯å¦æŒ‰äº†Bé”®å¼€å§‹æˆ˜æ–—
3. æ£€æŸ¥BossControllerçš„Auto AIæ˜¯å¦å‹¾é€‰

### Q: Bossä¸æ”»å‡»ï¼Ÿ

1. æ£€æŸ¥MeleeAttackçš„Max Rangeæ˜¯å¦è¶³å¤Ÿå¤§
2. æ£€æŸ¥Target Tagæ˜¯å¦è®¾ä¸º `Player`
3. æ£€æŸ¥Cooldown Timeæ˜¯å¦å¤ªé•¿
4. æ£€æŸ¥MeleeAttackæ˜¯å¦æŒ‚åœ¨Bossæˆ–å…¶å­å¯¹è±¡ä¸Š

### Q: æ”»å‡»ä¸é€ æˆä¼¤å®³ï¼Ÿ

1. æ£€æŸ¥Playeræ˜¯å¦æœ‰HealthComponentç»„ä»¶
2. æ£€æŸ¥Playerçš„Tagæ˜¯å¦ä¸º `Player`
3. æ£€æŸ¥MeleeAttackçš„Attack Offsetå’ŒAttack Radius
4. é€‰ä¸­Bossï¼Œåœ¨Sceneè§†å›¾ä¸­åº”è¯¥çœ‹åˆ°çº¢è‰²æ”»å‡»èŒƒå›´åœ†åœˆ

### Q: é˜¶æ®µä¸åˆ‡æ¢ï¼Ÿ

1. æ£€æŸ¥Bossæ˜¯å¦æœ‰BossPhaseManagerç»„ä»¶
2. æ£€æŸ¥BossDataçš„Phase1 Thresholdå’ŒPhase2 Thresholdå€¼
3. æ£€æŸ¥Show Debug Logsæ˜¯å¦å‹¾é€‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥

å®Œæˆé˜¶æ®µäºŒåï¼Œå¯ä»¥è¿›å…¥**é˜¶æ®µä¸‰ï¼šæˆ˜æ–—äº¤äº’ç³»ç»Ÿ**ï¼š

1. **3.1 ç©å®¶æ”»å‡»ç³»ç»Ÿ** - è®©ç©å®¶å¯ä»¥æ”»å‡»Boss
2. **3.2 ç©å®¶æ­»äº¡ä¸é‡ç”Ÿç³»ç»Ÿ** - å®Œæ•´çš„æˆ˜æ–—å¾ªç¯
3. **3.3 æˆ˜æ–—åŒºåŸŸç®¡ç†** - BossArena
4. **3.4 Bossæˆ˜æ–—çŠ¶æ€æœº** - æ›´æ™ºèƒ½çš„AIè¡Œä¸º

---

---

## âš ï¸ é‡è¦æé†’

1. **Layer é…ç½®**ï¼šGround Layer å’Œ Target Layer éƒ½ä¸è¦ç”¨ `Nothing` æˆ– `Everything`ï¼Œè¯·é€‰æ‹©å…·ä½“çš„å±‚
2. **Singleton ä¸ä¼šè‡ªåŠ¨åˆ›å»º**ï¼šç¡®ä¿æ‰€æœ‰ç®¡ç†å™¨å·²æ‰‹åŠ¨æ·»åŠ åˆ°åœºæ™¯ä¸­
3. **BossMovement çš„åœ°é¢æ£€æµ‹**ä½¿ç”¨ FixedUpdate å’Œæ³•çº¿è¿‡æ»¤ï¼Œä¸ Player çš„ GroundChecker ä¿æŒä¸€è‡´

**ç°åœ¨å¼€å§‹æ“ä½œå§ï¼æŒ‰ç…§æ­¥éª¤2.1-2.4é€æ­¥å®Œæˆé…ç½®ã€‚**
