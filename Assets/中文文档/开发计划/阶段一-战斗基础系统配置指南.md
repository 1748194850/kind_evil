# é˜¶æ®µä¸€ï¼šæˆ˜æ–—åŸºç¡€ç³»ç»Ÿé…ç½®æŒ‡å—

> **ç›®æ ‡ï¼š** åœ¨Unityç¼–è¾‘å™¨ä¸­é…ç½®ç”Ÿå‘½å€¼ç³»ç»Ÿã€ä¼¤å®³ç³»ç»Ÿå’ŒBossåŸºç¡€æ¡†æ¶  
> **é¢„è®¡æ—¶é—´ï¼š** 1-2å°æ—¶ï¼ˆä¸»è¦æ˜¯Unityç¼–è¾‘å™¨æ“ä½œï¼‰

---

## ğŸ“‹ ä»»åŠ¡æ¸…å•

- [ ] 1.1 ä¸ºPlayeræ·»åŠ HealthComponent
- [ ] 1.2 æµ‹è¯•ç”Ÿå‘½å€¼ç³»ç»Ÿ
- [ ] 1.3 åˆ›å»ºæµ‹è¯•ä¼¤å®³æº
- [ ] 1.4 åˆ›å»ºBoss GameObjectå’Œé…ç½®
- [ ] 1.5 æµ‹è¯•BossåŸºç¡€åŠŸèƒ½

---

## 1.1 ä¸ºPlayeræ·»åŠ HealthComponent

### æ­¥éª¤1ï¼šæ·»åŠ HealthComponentç»„ä»¶

1. åœ¨Hierarchyä¸­é€‰æ‹© `Player` GameObject
2. åœ¨Inspectorä¸­ç‚¹å‡» `Add Component`
3. æœç´¢ `HealthComponent`
4. æ·»åŠ ç»„ä»¶

### æ­¥éª¤2ï¼šé…ç½®HealthComponentå‚æ•°

åœ¨Inspectorçš„ `Health Component` ä¸­è®¾ç½®ï¼š

**ç”Ÿå‘½å€¼è®¾ç½®ï¼š**
- **Max Health**: `100`ï¼ˆæœ€å¤§ç”Ÿå‘½å€¼ï¼‰
- **Current Health**: `100`ï¼ˆå½“å‰ç”Ÿå‘½å€¼ï¼Œä¼šè‡ªåŠ¨è®¾ç½®ä¸ºMax Healthï¼‰

**æ— æ•Œæ—¶é—´è®¾ç½®ï¼š**
- âœ… **Has Invincibility**: å‹¾é€‰ï¼ˆå¯ç”¨æ— æ•Œæ—¶é—´ï¼‰
- **Invincibility Duration**: `0.5`ï¼ˆæ— æ•Œæ—¶é—´0.5ç§’ï¼‰
- âœ… **Flash On Hit**: å‹¾é€‰ï¼ˆå—ä¼¤æ—¶é—ªçƒï¼‰

**äº‹ä»¶è®¾ç½®ï¼š**
- âœ… **Use Event System**: å‹¾é€‰ï¼ˆä½¿ç”¨äº‹ä»¶ç³»ç»Ÿï¼‰
- **Health Change Event Name**: `HealthChanged`ï¼ˆä¿æŒé»˜è®¤ï¼‰

**è°ƒè¯•ï¼š**
- **Show Debug Logs**: å¯é€‰ï¼Œå‹¾é€‰åä¼šåœ¨Consoleä¸­æ˜¾ç¤ºç”Ÿå‘½å€¼å˜åŒ–æ—¥å¿—

### æ­¥éª¤3ï¼šéªŒè¯ç»„ä»¶

ç¡®ä¿Player GameObjectä¸Šæœ‰ï¼š
- âœ… `HealthComponent` ç»„ä»¶
- âœ… `Collider2D` ç»„ä»¶ï¼ˆHealthComponentéœ€è¦ï¼‰
- âœ… `Rigidbody2D` ç»„ä»¶ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

---

## 1.2 æµ‹è¯•ç”Ÿå‘½å€¼ç³»ç»Ÿ

### æ­¥éª¤1ï¼šåˆ›å»ºæµ‹è¯•è„šæœ¬ï¼ˆä¸´æ—¶ï¼‰

ä¸ºäº†æµ‹è¯•ç”Ÿå‘½å€¼ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•è„šæœ¬ï¼š

1. åœ¨Projectçª—å£ä¸­ï¼Œå¯¼èˆªåˆ° `Assets/Scenes/1_Gameplay/Player/Components/`
2. åˆ›å»ºä¸€ä¸ªæ–°è„šæœ¬ï¼ˆå³é”® â†’ `Create` â†’ `C# Script`ï¼‰
3. å‘½åä¸º `HealthTestHelper`ï¼ˆä¸´æ—¶æµ‹è¯•ç”¨ï¼‰

**è„šæœ¬å†…å®¹ï¼š**
```csharp
using UnityEngine;
using Core.Frameworks.Combat;

public class HealthTestHelper : MonoBehaviour
{
    private HealthComponent health;
    
    void Start()
    {
        health = GetComponent<HealthComponent>();
    }
    
    void Update()
    {
        // æŒ‰Hé”®æ²»ç–—10ç‚¹ç”Ÿå‘½å€¼
        if (Input.GetKeyDown(KeyCode.H))
        {
            if (health != null)
            {
                health.Heal(10f);
                Debug.Log($"Healed! Health: {health.CurrentHealth}/{health.MaxHealth}");
            }
        }
        
        // æŒ‰Jé”®å—åˆ°10ç‚¹ä¼¤å®³
        if (Input.GetKeyDown(KeyCode.J))
        {
            if (health != null)
            {
                health.TakeDamage(10f);
                Debug.Log($"Damaged! Health: {health.CurrentHealth}/{health.MaxHealth}");
            }
        }
    }
}
```

4. å°†è„šæœ¬æ·»åŠ åˆ°Player GameObjectä¸Š
5. è¿è¡Œæ¸¸æˆï¼ŒæŒ‰ `H` é”®æ²»ç–—ï¼ŒæŒ‰ `J` é”®å—ä¼¤

### æ­¥éª¤2ï¼šè§‚å¯Ÿæ•ˆæœ

è¿è¡Œæ¸¸æˆåï¼š
- æŒ‰ `J` é”®ï¼šç©å®¶åº”è¯¥å—åˆ°ä¼¤å®³ï¼Œç”Ÿå‘½å€¼å‡å°‘ï¼Œå¹¶ä¸”æœ‰é—ªçƒæ•ˆæœï¼ˆæ— æ•Œæ—¶é—´ï¼‰
- æŒ‰ `H` é”®ï¼šç©å®¶åº”è¯¥è¢«æ²»ç–—ï¼Œç”Ÿå‘½å€¼å¢åŠ 
- å½“ç”Ÿå‘½å€¼å½’é›¶æ—¶ï¼šåº”è¯¥è§¦å‘æ­»äº¡äº‹ä»¶ï¼ˆConsoleä¸­ä¼šæ˜¾ç¤ºï¼‰

---

## 1.3 åˆ›å»ºæµ‹è¯•ä¼¤å®³æº

### æ­¥éª¤1ï¼šåˆ›å»ºä¼¤å®³åŒºåŸŸ

1. åœ¨Hierarchyä¸­å³é”®ç‚¹å‡» â†’ `2D Object` â†’ `Sprite` â†’ `Square`
2. å‘½åä¸º `DamageZone`
3. è®¾ç½®Transformï¼š
   - **Position**: `(5, 0, 0)`ï¼ˆåœ¨ç©å®¶å³ä¾§ï¼‰
   - **Scale**: `(2, 2, 1)`
4. åœ¨Inspectorä¸­ï¼š
   - **Sprite Renderer** â†’ **Color**: çº¢è‰²ï¼ˆä¾‹å¦‚ï¼š`#FF0000`ï¼ŒåŠé€æ˜ï¼‰
   - **Sorting Layer**: `Default`
   - **Order in Layer**: `5`ï¼ˆç¡®ä¿åœ¨Playerå‰é¢ï¼Œå¯è§ï¼‰

### æ­¥éª¤2ï¼šæ·»åŠ ç¢°æ’ä½“

1. é€‰æ‹© `DamageZone` GameObject
2. æ·»åŠ  `Box Collider 2D` ç»„ä»¶
3. åœ¨Inspectorä¸­ï¼š
   - âœ… **Is Trigger**: å‹¾é€‰ï¼ˆä½¿ç”¨Triggeræ¨¡å¼ï¼‰

### æ­¥éª¤3ï¼šæ·»åŠ DamageDealerç»„ä»¶

1. é€‰æ‹© `DamageZone` GameObject
2. æ·»åŠ  `DamageDealer` ç»„ä»¶
3. é…ç½®å‚æ•°ï¼š

**ä¼¤å®³è®¾ç½®ï¼š**
- **Base Damage**: `10`ï¼ˆåŸºç¡€ä¼¤å®³å€¼ï¼‰
- **Damage Type**: `Physical`ï¼ˆç‰©ç†ä¼¤å®³ï¼‰

**å‡»é€€è®¾ç½®ï¼š**
- **Knockback Force**: `(0, 0)`ï¼ˆæš‚æ—¶ä¸è®¾ç½®å‡»é€€ï¼‰
- **Knockback Multiplier**: `1`

**ä¼¤å®³è¿‡æ»¤ï¼š**
- **Target Tags**: 
  - ç‚¹å‡» `+` æ·»åŠ ä¸€ä¸ªå…ƒç´ 
  - è®¾ç½®ä¸º `Player`ï¼ˆåªä¼¤å®³ç©å®¶ï¼‰
- **Target Layers**: `Everything`ï¼ˆæˆ–é€‰æ‹©ç‰¹å®šå±‚ï¼‰
- âœ… **Ignore Self Tag**: å‹¾é€‰

**ä¼¤å®³å†·å´ï¼š**
- âœ… **Use Damage Cooldown**: å‹¾é€‰
- **Damage Cooldown**: `0.5`ï¼ˆ0.5ç§’å†·å´ï¼Œé¿å…é‡å¤ä¼¤å®³ï¼‰

**ç¢°æ’æ£€æµ‹è®¾ç½®ï¼š**
- âœ… **Use Trigger**: å‹¾é€‰ï¼ˆä½¿ç”¨Triggeræ¨¡å¼ï¼‰

**è°ƒè¯•ï¼š**
- **Show Debug Logs**: å¯é€‰ï¼Œå‹¾é€‰åä¼šåœ¨Consoleä¸­æ˜¾ç¤ºä¼¤å®³æ—¥å¿—

### æ­¥éª¤4ï¼šæµ‹è¯•ä¼¤å®³ç³»ç»Ÿ

1. è¿è¡Œæ¸¸æˆ
2. æ§åˆ¶ç©å®¶ç§»åŠ¨åˆ°çº¢è‰²åŒºåŸŸï¼ˆDamageZoneï¼‰
3. ç©å®¶åº”è¯¥å—åˆ°ä¼¤å®³ï¼š
   - ç”Ÿå‘½å€¼å‡å°‘
   - æœ‰é—ªçƒæ•ˆæœï¼ˆæ— æ•Œæ—¶é—´ï¼‰
   - Consoleä¸­æ˜¾ç¤ºä¼¤å®³æ—¥å¿—ï¼ˆå¦‚æœå¯ç”¨äº†è°ƒè¯•ï¼‰

---

## 1.4 åˆ›å»ºBoss GameObjectå’Œé…ç½®

### æ­¥éª¤1ï¼šåˆ›å»ºBossData ScriptableObject

1. åœ¨Projectçª—å£ä¸­ï¼Œå¯¼èˆªåˆ° `Assets/Scenes/1_Gameplay/Boss/`
2. å³é”®ç‚¹å‡» â†’ `Create` â†’ `Gameplay` â†’ `Boss` â†’ `Boss Data`
3. å‘½åä¸º `TestBossData`
4. åœ¨Inspectorä¸­é…ç½®ï¼š

**åŸºç¡€ä¿¡æ¯ï¼š**
- **Boss Name**: `Test Boss`
- **Description**: `ç¬¬ä¸€ä¸ªæµ‹è¯•Boss`

**ç”Ÿå‘½å€¼è®¾ç½®ï¼š**
- **Max Health**: `500`ï¼ˆBossç”Ÿå‘½å€¼ï¼‰

**ç§»åŠ¨è®¾ç½®ï¼š**
- **Move Speed**: `3`
- **Jump Force**: `5`

**æ”»å‡»è®¾ç½®ï¼š**
- **Base Attack Damage**: `20`
- **Attack Range**: `2`
- **Attack Cooldown**: `2`

**é˜¶æ®µè®¾ç½®ï¼š**
- **Phase1 Threshold**: `0.7`ï¼ˆ70%ç”Ÿå‘½å€¼ä»¥ä¸Šæ˜¯é˜¶æ®µ1ï¼‰
- **Phase2 Threshold**: `0.4`ï¼ˆ40%-70%æ˜¯é˜¶æ®µ2ï¼Œ40%ä»¥ä¸‹æ˜¯é˜¶æ®µ3ï¼‰

**AIè®¾ç½®ï¼š**
- **Chase Distance**: `10`
- **Attack Distance**: `2`
- **Retreat Distance**: `5`

**å…¶ä»–è®¾ç½®ï¼š**
- **Boss Tag**: `Boss`ï¼ˆéœ€è¦å…ˆåœ¨Unityä¸­åˆ›å»ºè¿™ä¸ªTagï¼‰

### æ­¥éª¤2ï¼šåˆ›å»ºBoss Tagï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

1. ç‚¹å‡»èœå•æ  `Edit` â†’ `Project Settings`
2. é€‰æ‹© `Tags and Layers`
3. åœ¨ `Tags` éƒ¨åˆ†ï¼Œç‚¹å‡» `+` æ·»åŠ æ–°Tag
4. å‘½åä¸º `Boss`
5. ç‚¹å‡» `Save`

### æ­¥éª¤3ï¼šåˆ›å»ºBoss GameObject

1. åœ¨Hierarchyä¸­å³é”®ç‚¹å‡» â†’ `2D Object` â†’ `Sprite` â†’ `Square`
2. å‘½åä¸º `Boss`
3. è®¾ç½®Transformï¼š
   - **Position**: `(10, 0, 0)`ï¼ˆåœ¨ç©å®¶å³ä¾§ï¼‰
   - **Scale**: `(2, 2, 1)`ï¼ˆæ¯”ç©å®¶å¤§ï¼‰
4. åœ¨Inspectorä¸­ï¼š
   - **Sprite Renderer** â†’ **Color**: ç´«è‰²ï¼ˆä¾‹å¦‚ï¼š`#800080`ï¼‰
   - **Sorting Layer**: `Default`
   - **Order in Layer**: `0`

### æ­¥éª¤4ï¼šæ·»åŠ Bossç»„ä»¶

1. é€‰æ‹© `Boss` GameObject
2. æ·»åŠ ä»¥ä¸‹ç»„ä»¶ï¼š

#### 4.1 Rigidbody2D
- **Gravity Scale**: `3`
- âœ… **Freeze Rotation Z**: å‹¾é€‰

#### 4.2 Box Collider 2D
- ä¿æŒé»˜è®¤è®¾ç½®

#### 4.3 HealthComponent
- **Max Health**: `500`ï¼ˆæˆ–ä½¿ç”¨BossDataä¸­çš„å€¼ï¼‰
- **Current Health**: `500`
- âœ… **Has Invincibility**: å‹¾é€‰
- **Invincibility Duration**: `0.5`
- âœ… **Flash On Hit**: å‹¾é€‰
- âœ… **Use Event System**: å‹¾é€‰

#### 4.4 BossController
- **Boss Data**: å°†ä¹‹å‰åˆ›å»ºçš„ `TestBossData` ScriptableObjectæ‹–åˆ°è¿™é‡Œ
- **Show Debug Logs**: å¯é€‰ï¼Œå‹¾é€‰åæ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯

### æ­¥éª¤5ï¼šè®¾ç½®Boss Tag

1. é€‰æ‹© `Boss` GameObject
2. åœ¨Inspectoré¡¶éƒ¨çš„ `Tag` ä¸‹æ‹‰èœå•ä¸­
3. é€‰æ‹© `Boss`ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼Œå…ˆåˆ›å»ºï¼‰

---

## 1.5 æµ‹è¯•BossåŸºç¡€åŠŸèƒ½

### æ­¥éª¤1ï¼šåˆ›å»ºBossä¼¤å®³æµ‹è¯•åŒºåŸŸ

1. åˆ›å»ºä¸€ä¸ªæ–°çš„ä¼¤å®³åŒºåŸŸï¼ˆå‚è€ƒ1.3æ­¥éª¤ï¼‰
2. å‘½åä¸º `BossDamageZone`
3. é…ç½® `DamageDealer` ç»„ä»¶ï¼š
   - **Base Damage**: `5`ï¼ˆå¯¹Bossé€ æˆ5ç‚¹ä¼¤å®³ï¼‰
   - **Target Tags**: æ·»åŠ  `Boss`ï¼ˆåªä¼¤å®³Bossï¼‰
   - å…¶ä»–è®¾ç½®ä¿æŒé»˜è®¤

### æ­¥éª¤2ï¼šæµ‹è¯•Bossç”Ÿå‘½å€¼

1. è¿è¡Œæ¸¸æˆ
2. æ§åˆ¶Bossç§»åŠ¨åˆ°ä¼¤å®³åŒºåŸŸï¼ˆæˆ–æ‰‹åŠ¨ç§»åŠ¨Boss GameObjectï¼‰
3. Bossåº”è¯¥å—åˆ°ä¼¤å®³ï¼š
   - ç”Ÿå‘½å€¼å‡å°‘
   - æœ‰é—ªçƒæ•ˆæœ
   - Consoleä¸­æ˜¾ç¤ºç”Ÿå‘½å€¼å˜åŒ–å’Œé˜¶æ®µä¿¡æ¯

### æ­¥éª¤3ï¼šæµ‹è¯•Bossæˆ˜æ–—å¼€å§‹

åˆ›å»ºä¸€ä¸ªæµ‹è¯•è„šæœ¬æˆ–ä½¿ç”¨Inspectorï¼š

1. é€‰æ‹© `Boss` GameObject
2. åœ¨Inspectorä¸­æ‰¾åˆ° `Boss Controller` ç»„ä»¶
3. åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ `StartBattle()` æ–¹æ³•ï¼ˆéœ€è¦åˆ›å»ºæµ‹è¯•è„šæœ¬ï¼‰

**æˆ–è€…åˆ›å»ºæµ‹è¯•è„šæœ¬ï¼š**
```csharp
using UnityEngine;
using Gameplay.Boss;

public class BossTestHelper : MonoBehaviour
{
    private BossController boss;
    
    void Start()
    {
        boss = GetComponent<BossController>();
    }
    
    void Update()
    {
        // æŒ‰Bé”®å¼€å§‹Bossæˆ˜æ–—
        if (Input.GetKeyDown(KeyCode.B))
        {
            if (boss != null)
            {
                boss.StartBattle();
            }
        }
    }
}
```

4. å°†è„šæœ¬æ·»åŠ åˆ°Boss GameObjectä¸Š
5. è¿è¡Œæ¸¸æˆï¼ŒæŒ‰ `B` é”®å¼€å§‹Bossæˆ˜æ–—
6. è§‚å¯ŸConsoleï¼Œåº”è¯¥çœ‹åˆ°Bossæˆ˜æ–—å¼€å§‹çš„äº‹ä»¶

---

## âœ… å®Œæˆæ£€æŸ¥æ¸…å•

å®Œæˆæ‰€æœ‰æ­¥éª¤åï¼Œæ£€æŸ¥ï¼š

- [ ] Playeræœ‰HealthComponentç»„ä»¶
- [ ] Playerå¯ä»¥å—åˆ°ä¼¤å®³å’Œæ²»ç–—
- [ ] DamageZoneå¯ä»¥ä¼¤å®³Player
- [ ] BossData ScriptableObjectå·²åˆ›å»º
- [ ] Boss GameObjectå·²åˆ›å»ºå¹¶é…ç½®
- [ ] Bossæœ‰HealthComponentå’ŒBossControllerç»„ä»¶
- [ ] Bosså¯ä»¥å—åˆ°ä¼¤å®³
- [ ] Bossæˆ˜æ–—å¯ä»¥å¼€å§‹ï¼ˆé€šè¿‡æµ‹è¯•è„šæœ¬ï¼‰
- [ ] Consoleä¸­æ— é”™è¯¯ä¿¡æ¯

---

## ğŸ¯ ä¸‹ä¸€æ­¥

å®Œæˆé˜¶æ®µä¸€åï¼Œå¯ä»¥è¿›å…¥**é˜¶æ®µäºŒï¼šBossæ ¸å¿ƒåŠŸèƒ½**ï¼š

1. **2.1 Bossé˜¶æ®µç³»ç»Ÿ** - å®ç°é˜¶æ®µåˆ‡æ¢é€»è¾‘
2. **2.2 Bossç§»åŠ¨ç³»ç»Ÿ** - å®ç°Bossç§»åŠ¨è¡Œä¸º
3. **2.3 Bossæ”»å‡»ç³»ç»Ÿ** - å®ç°Bossæ”»å‡»æ¨¡å¼

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q: HealthComponentæ‰¾ä¸åˆ°ï¼Ÿ

**A**: 
1. ç¡®ä¿è„šæœ¬å·²ç¼–è¯‘ï¼ˆæŸ¥çœ‹Consoleæ˜¯å¦æœ‰é”™è¯¯ï¼‰
2. å°è¯•é‡æ–°å¯¼å…¥è„šæœ¬ï¼ˆå³é”® â†’ `Reimport`ï¼‰
3. æ£€æŸ¥å‘½åç©ºé—´æ˜¯å¦æ­£ç¡®

### Q: Boss Tagä¸å­˜åœ¨ï¼Ÿ

**A**: 
1. `Edit` â†’ `Project Settings` â†’ `Tags and Layers`
2. åœ¨Tagséƒ¨åˆ†æ·»åŠ  `Boss` Tag
3. ä¿å­˜åé‡æ–°è®¾ç½®Boss GameObjectçš„Tag

### Q: Bossæˆ˜æ–—å¼€å§‹æ—¶æ‘„åƒæœºä¸åˆ‡æ¢ï¼Ÿ

**A**: 
1. ç¡®ä¿CameraManageråœ¨åœºæ™¯ä¸­
2. ç¡®ä¿GameInitializerå·²æ³¨å†ŒICameraManager
3. æ£€æŸ¥Consoleæ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### Q: ä¼¤å®³ä¸ç”Ÿæ•ˆï¼Ÿ

**A**: 
1. æ£€æŸ¥DamageDealerçš„Target Tagsæ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥Target Layersæ˜¯å¦åŒ…å«ç›®æ ‡å¯¹è±¡
3. æ£€æŸ¥Use Triggeræ˜¯å¦ä¸Colliderè®¾ç½®åŒ¹é…
4. æ£€æŸ¥ä¼¤å®³å†·å´æ—¶é—´æ˜¯å¦å¤ªé•¿

---

**ç°åœ¨å¼€å§‹æ“ä½œå§ï¼æŒ‰ç…§æ­¥éª¤1.1-1.5é€æ­¥å®Œæˆé…ç½®ã€‚**
