# 🚀 快速修复跳跃问题 - "Not grounded"

## 问题：显示 "Cannot jump: Not grounded! IsGrounded: False"

这说明地面检测失败了。按照以下步骤快速修复：

## ⚡ 3步快速修复

### 步骤 1: 检查 Ground Layer 设置（最重要！）

1. 选择 **Player** 对象
2. 在 Inspector 中找到 **PlayerController** 组件
3. 找到 **Ground Layer** 字段
4. **如果显示 `Nothing`**：
   - 点击下拉菜单
   - 选择 **Everything**（或包含地面的层）
5. 这是最常见的问题！

### 步骤 2: 增加检测距离

1. 在 **PlayerController** 组件中
2. 将 **Ground Check Distance** 改为 `0.5` 或更大
3. 默认的 `0.2` 可能太小

### 步骤 3: 检查地面对象

1. 确保 **Ground** 对象存在
2. 确保 Ground 有 **Box Collider 2D** 组件
3. 确保 Ground 在 Player 下方
4. 检查 Ground 的 Position，应该在 `(0, -3, 0)` 左右

## 🔍 详细检查清单

### ✅ 必须检查的项目

- [ ] **Ground Layer** 不是 `Nothing`（应该是 `Everything`）
- [ ] **Ground Check Distance** 至少是 `0.3` 或更大
- [ ] Ground 对象有 **Box Collider 2D**
- [ ] Ground 的 Position Y 值小于 Player 的 Position Y 值
- [ ] Player 有 **Box Collider 2D**
- [ ] Player 有 **Rigidbody2D**（Body Type = Dynamic）

### 📊 推荐的设置值

| 参数 | 推荐值 | 说明 |
|------|--------|------|
| Ground Layer | **Everything** | 检测所有层 |
| Ground Check Distance | **0.5** | 检测距离 |
| Jump Force | 15-20 | 跳跃力度 |

## 🐛 调试方法

### 方法 1: 查看调试线

1. 运行场景
2. 切换到 **Scene 视图**（不是 Game 视图）
3. 选择 Player 对象
4. 查看从 Player 向下延伸的线条：
   - **绿色** = 检测到地面 ✅
   - **红色** = 没有检测到地面 ❌

### 方法 2: 查看 Console 信息

1. 运行场景
2. 打开 Console 窗口（`Window` → `General` → `Console`）
3. 等待几秒，应该会看到类似这样的信息：
   ```
   Ground Check - Center: True, Left: True, Right: True, Distance: 0.5, ...
   ```
4. 如果所有都是 `False`，说明检测失败

### 方法 3: 检查场景结构

确保 Hierarchy 中：
```
Scene
├── Player (Position: 0, 0, 0)
└── Ground (Position: 0, -3, 0)
```

## 🔧 如果还是不行

### 方案 A: 使用更简单的检测方法

如果 BoxCast 有问题，可以临时使用更简单的方法：

1. 在 PlayerController 中
2. 将 **Ground Check Distance** 设置为 `1.0`（很大）
3. 这样即使距离远也能检测到

### 方案 B: 检查物理设置

1. 选择 Ground 对象
2. 检查 **Box Collider 2D**：
   - **Is Trigger** 应该是 **未勾选** ❌
   - **Used By Effector** 可以是勾选或未勾选

### 方案 C: 重新创建 Ground

1. 删除现有的 Ground 对象
2. 创建新的：
   - `Hierarchy` → 右键 → `2D Object` → `Sprite` → `Square`
   - 命名为 `Ground`
   - Position: `(0, -3, 0)`
   - Scale: `(10, 1, 1)`
   - 添加 `Box Collider 2D`

## ✅ 验证修复

修复后，应该看到：

1. **Console 中**：
   - 不再显示 "Cannot jump: Not grounded"
   - 显示 "Player jumped!" 当按 Space 时

2. **Scene 视图中**：
   - 从 Player 向下的线条是 **绿色**

3. **游戏中**：
   - 按 Space 可以跳跃

## 📝 常见错误

### ❌ 错误 1: Ground Layer = Nothing
**结果**：永远检测不到地面
**解决**：设置为 `Everything`

### ❌ 错误 2: Ground Check Distance = 0.1
**结果**：距离太小，检测不到
**解决**：增加到 `0.5` 或更大

### ❌ 错误 3: Ground 没有碰撞体
**结果**：无法检测到
**解决**：添加 `Box Collider 2D`

### ❌ 错误 4: Ground 在 Player 上方
**结果**：检测方向错误
**解决**：确保 Ground 的 Y 值小于 Player 的 Y 值

---

**记住**：90% 的问题都是 **Ground Layer 设置为 Nothing**！先检查这个！🎯

