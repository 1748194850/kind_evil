# âš ï¸ DontDestroyOnLoad è­¦å‘Šè¯´æ˜

## é—®é¢˜æè¿°

Unity æ§åˆ¶å°æ˜¾ç¤ºï¼š
```
Some objects were not cleaned up when closing the scene. 
(Did you spawn new GameObjects from OnDestroy?)
The following scene GameObjects were found:
InputManager
```

## ğŸ“‹ åŸå› è¯´æ˜

è¿™ä¸ªè­¦å‘Šæ˜¯**æ­£å¸¸è¡Œä¸º**ï¼Œä¸æ˜¯é”™è¯¯ï¼

### ä¸ºä»€ä¹ˆä¼šæ˜¾ç¤ºè¿™ä¸ªè­¦å‘Šï¼Ÿ

1. **å•ä¾‹ç®¡ç†å™¨è®¾è®¡**ï¼š
   - `InputManager`ã€`GameManager`ã€`EventManager` ç­‰ç®¡ç†å™¨ä½¿ç”¨äº† `Singleton` æ¨¡å¼
   - å®ƒä»¬ä½¿ç”¨ `DontDestroyOnLoad(gameObject)` æ¥ç¡®ä¿åœ¨åœºæ™¯åˆ‡æ¢æ—¶ä¸è¢«é”€æ¯
   - è¿™æ˜¯ä¸ºäº†ä¿æŒæ¸¸æˆçŠ¶æ€å’ŒåŠŸèƒ½åœ¨åœºæ™¯ä¹‹é—´æŒç»­å­˜åœ¨

2. **Unity çš„æ£€æµ‹æœºåˆ¶**ï¼š
   - Unity åœ¨åœºæ™¯å…³é—­æ—¶ä¼šæ£€æŸ¥æ˜¯å¦æœ‰å¯¹è±¡æ²¡æœ‰è¢«æ¸…ç†
   - ä½¿ç”¨ `DontDestroyOnLoad` çš„å¯¹è±¡**æ•…æ„**ä¸è¢«æ¸…ç†ï¼Œæ‰€ä»¥ä¼šè§¦å‘è¿™ä¸ªè­¦å‘Š
   - è¿™æ˜¯ Unity çš„æé†’ï¼Œä¸æ˜¯é”™è¯¯

## âœ… è¿™æ˜¯æ­£å¸¸è¡Œä¸º

**ä½ å¯ä»¥å®‰å…¨åœ°å¿½ç•¥è¿™ä¸ªè­¦å‘Š**ï¼Œå› ä¸ºï¼š

- âœ… å•ä¾‹ç®¡ç†å™¨åº”è¯¥åœ¨åœºæ™¯åˆ‡æ¢æ—¶ä¿ç•™
- âœ… è¿™æ˜¯æ¸¸æˆæ¶æ„çš„æ­£å¸¸è®¾è®¡
- âœ… ä¸ä¼šå½±å“æ¸¸æˆåŠŸèƒ½
- âœ… ä¸ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼ˆå•ä¾‹æ˜¯å…¨å±€å”¯ä¸€çš„ï¼‰

## ğŸ”§ å¦‚æœç¡®å®éœ€è¦æ¸…ç†

å¦‚æœä½ åœ¨ç¼–è¾‘å™¨æ¨¡å¼ä¸‹æµ‹è¯•ï¼Œæƒ³è¦æ¸…ç†è¿™äº›å¯¹è±¡ï¼š

### æ–¹æ³• 1ï¼šæ‰‹åŠ¨åˆ é™¤ï¼ˆç¼–è¾‘å™¨æ¨¡å¼ï¼‰

1. åœ¨ Hierarchy ä¸­æŸ¥æ‰¾ `InputManager`ã€`GameManager` ç­‰å¯¹è±¡
2. å³é”®ç‚¹å‡» â†’ `Delete` åˆ é™¤å®ƒä»¬
3. ä¸‹æ¬¡è¿è¡Œåœºæ™¯æ—¶ä¼šè‡ªåŠ¨é‡æ–°åˆ›å»º

### æ–¹æ³• 2ï¼šä½¿ç”¨ä»£ç æ¸…ç†ï¼ˆè¿è¡Œæ—¶ï¼‰

å¦‚æœéœ€è¦æ‰‹åŠ¨æ¸…ç†å•ä¾‹ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­è°ƒç”¨ï¼š

```csharp
// æ¸…ç† InputManager
if (InputManager.Instance != null)
{
    Destroy(InputManager.Instance.gameObject);
}
```

## ğŸ“ ç›¸å…³è„šæœ¬

ä»¥ä¸‹ç®¡ç†å™¨ä½¿ç”¨ `DontDestroyOnLoad`ï¼Œå¯èƒ½ä¼šè§¦å‘æ­¤è­¦å‘Šï¼š

| ç®¡ç†å™¨ | è„šæœ¬ä½ç½® | è¯´æ˜ |
|--------|---------|------|
| `InputManager` | `Assets/Scenes/0_Core/Managers/InputManager.cs` | è¾“å…¥ç®¡ç† |
| `GameManager` | `Assets/Scenes/0_Core/Managers/GameManager.cs` | æ¸¸æˆçŠ¶æ€ç®¡ç† |
| `EventManager` | `Assets/Scenes/0_Core/Frameworks/EventSystem/EventManager.cs` | äº‹ä»¶ç³»ç»Ÿ |
| `SceneManager` | `Assets/Scenes/0_Core/Managers/SceneManager.cs` | åœºæ™¯ç®¡ç† |
| `TimeManager` | `Assets/Scenes/0_Core/Managers/TimeManager.cs` | æ—¶é—´ç®¡ç† |
| `SaveManager` | `Assets/Scenes/0_Core/Frameworks/SaveSystem/SaveManager.cs` | å­˜æ¡£ç®¡ç† |
| `PoolManager` | `Assets/Scenes/0_Core/Frameworks/Pooling/PoolManager.cs` | å¯¹è±¡æ± ç®¡ç† |

## ğŸ¯ æœ€ä½³å®è·µ

1. **è¿è¡Œæ—¶**ï¼šè®©å•ä¾‹ç®¡ç†å™¨ä¿ç•™ï¼Œè¿™æ˜¯æ­£å¸¸çš„è®¾è®¡
2. **ç¼–è¾‘å™¨æµ‹è¯•**ï¼šå¯ä»¥å¿½ç•¥è¿™ä¸ªè­¦å‘Šï¼Œæˆ–è€…æ‰‹åŠ¨åˆ é™¤å¯¹è±¡
3. **å‘å¸ƒæ¸¸æˆ**ï¼šè¿™ä¸ªè­¦å‘Šä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆæ¸¸æˆä¸­

## ğŸ” å¦‚ä½•åŒºåˆ†çœŸæ­£çš„é”™è¯¯ï¼Ÿ

å¦‚æœçœ‹åˆ°ç±»ä¼¼çš„è­¦å‘Šï¼Œä½†å¯¹è±¡**ä¸æ˜¯**å•ä¾‹ç®¡ç†å™¨ï¼Œé‚£å¯èƒ½æ˜¯çœŸæ­£çš„é—®é¢˜ï¼š

- âŒ æ™®é€š GameObject æ²¡æœ‰è¢«æ¸…ç† â†’ å¯èƒ½æ˜¯å†…å­˜æ³„æ¼
- âŒ åœ¨ `OnDestroy` ä¸­åˆ›å»ºæ–°å¯¹è±¡ â†’ éœ€è¦ä¿®å¤ä»£ç 
- âœ… å•ä¾‹ç®¡ç†å™¨ï¼ˆå¦‚ `InputManager`ï¼‰â†’ æ­£å¸¸è¡Œä¸ºï¼Œå¯ä»¥å¿½ç•¥

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Singleton æ¨¡å¼è¯´æ˜](../æ•™ç¨‹/åˆ›å»ºç¬¬ä¸€ä¸ªåœºæ™¯.md#å•ä¾‹ç®¡ç†å™¨)
- [ä¿®å¤ç¼ºå¤±è„šæœ¬å¼•ç”¨](./ä¿®å¤ç¼ºå¤±è„šæœ¬å¼•ç”¨.md)

