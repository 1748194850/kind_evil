# 🦘 跳跃问题排查指南

## 快速检查清单

### ✅ 1. 检查输入系统
- [ ] 按 `Space` 键时，Console 中是否显示 "Player jumped!" 或 "Cannot jump"？
  - 如果**没有任何消息**：输入事件没有触发
  - 如果显示 "Cannot jump"：地面检测有问题
  - 如果显示 "Player jumped!"：可能是物理设置问题

### ✅ 2. 检查 InputManager
- [ ] 在 Hierarchy 中是否有 `InputManager` 对象？
- [ ] Console 中是否有 "InputManager not found!" 警告？
- [ ] 打开 `Edit` → `Project Settings` → `Input Manager`
  - 检查是否有 `Jump` 输入轴
  - `Jump` 的 **Positive Button** 应该是 `space`

### ✅ 3. 检查 PlayerController 组件
在 Inspector 中检查 Player 对象的 `PlayerController` 组件：
- [ ] **Move Speed**: 应该是 `5` 左右
- [ ] **Jump Force**: 应该是 `10` 或更大（如果太小，跳不起来）
- [ ] **Ground Check Distance**: 应该是 `0.2` 左右
- [ ] **Ground Layer**: 
  - 如果显示 `Nothing`：**这是问题！** 需要设置为 `Everything` 或包含地面的层
  - 如果显示 `Everything`：应该可以检测所有层
- [ ] **Show Debug Info**: 勾选 ✅，这样可以看到调试信息

### ✅ 4. 检查 Rigidbody2D
在 Inspector 中检查 Player 对象的 `Rigidbody2D` 组件：
- [ ] **Body Type**: 应该是 `Dynamic`（不是 `Kinematic` 或 `Static`）
- [ ] **Gravity Scale**: 应该是 `1`（如果是 `0`，物体会浮在空中）
- [ ] **Freeze Rotation Z**: 应该勾选 ✅（防止旋转）
- [ ] **Collision Detection**: 可以是 `Discrete` 或 `Continuous`

### ✅ 5. 检查地面对象
- [ ] Ground 对象是否有 `Box Collider 2D` 组件？
- [ ] Ground 的 Position 是否在 Player 下方？
- [ ] Ground 的 Scale 是否足够大（例如 `(10, 1, 1)`）？

### ✅ 6. 检查碰撞体
- [ ] Player 对象是否有 `Box Collider 2D` 组件？
- [ ] Player 和 Ground 的碰撞体是否重叠？

## 🔧 常见问题和解决方法

### 问题 1: 按 Space 没有任何反应

**可能原因**：
- InputManager 没有正确初始化
- Jump 输入轴没有配置

**解决方法**：
1. 检查 Hierarchy 中是否有 `InputManager` 对象
2. 打开 `Edit` → `Project Settings` → `Input Manager`
3. 找到 `Jump` 输入轴，确保 **Positive Button** 是 `space`

### 问题 2: Console 显示 "Cannot jump: Not grounded"

**可能原因**：
- 地面检测失败
- Ground Layer 设置错误
- 地面检测距离太小

**解决方法**：
1. 在 PlayerController 组件中：
   - 将 **Ground Layer** 设置为 `Everything`
   - 将 **Ground Check Distance** 增加到 `0.3` 或 `0.5`
2. 确保 Ground 对象有碰撞体
3. 在 Scene 视图中查看调试线（绿色=在地面，红色=不在地面）

### 问题 3: 能跳但跳得很低

**可能原因**：
- Jump Force 太小
- Gravity Scale 太大

**解决方法**：
1. 增加 **Jump Force**（例如从 `10` 改为 `15` 或 `20`）
2. 检查 **Gravity Scale** 是否为 `1`（不要太大）

### 问题 4: 在空中也能跳跃

**可能原因**：
- 地面检测不准确
- 没有正确检查 isGrounded

**解决方法**：
- 代码已经修复，确保 `isGrounded` 检查正确
- 可以增加 **Ground Check Distance**

### 问题 5: 玩家掉出场景

**可能原因**：
- 没有地面
- 地面位置不对

**解决方法**：
1. 创建 Ground 对象
2. 设置 Position 为 `(0, -3, 0)`
3. 设置 Scale 为 `(10, 1, 1)`
4. 添加 `Box Collider 2D`

## 🎯 快速修复步骤

### 步骤 1: 检查输入
```
1. 打开 Edit → Project Settings → Input Manager
2. 找到 Jump 输入轴
3. 确保 Positive Button 是 "space"
```

### 步骤 2: 检查 PlayerController 设置
```
1. 选择 Player 对象
2. 在 Inspector 中找到 PlayerController 组件
3. 设置：
   - Jump Force: 15
   - Ground Check Distance: 0.3
   - Ground Layer: Everything
   - Show Debug Info: ✅
```

### 步骤 3: 检查 Rigidbody2D
```
1. 选择 Player 对象
2. 在 Inspector 中找到 Rigidbody2D 组件
3. 确保：
   - Body Type: Dynamic
   - Gravity Scale: 1
   - Freeze Rotation Z: ✅
```

### 步骤 4: 测试
```
1. 运行场景
2. 按 Space 键
3. 查看 Console 窗口的调试信息
4. 在 Scene 视图中查看绿色/红色调试线
```

## 🐛 调试技巧

### 1. 查看调试信息
- 勾选 **Show Debug Info**
- 运行场景后查看 Console 窗口
- 每次按 Space 都会显示调试信息

### 2. 查看地面检测
- 在 Scene 视图中（不是 Game 视图）
- 选择 Player 对象
- 查看绿色/红色线条：
  - **绿色** = 检测到地面（可以跳跃）
  - **红色** = 没有检测到地面（不能跳跃）

### 3. 测试输入
- 在 Console 中查看是否有 "Player jumped!" 消息
- 如果没有消息，说明输入事件没有触发

## 📝 推荐的设置值

| 参数 | 推荐值 | 说明 |
|------|--------|------|
| Move Speed | 5 | 移动速度 |
| Jump Force | 15-20 | 跳跃力度（太小跳不起来） |
| Ground Check Distance | 0.2-0.3 | 地面检测距离 |
| Ground Layer | Everything | 检测所有层（或指定地面层） |
| Gravity Scale | 1 | 重力大小（0=无重力） |

## ✅ 如果还是不行

1. **检查 Console 错误**：是否有红色错误信息？
2. **重新添加组件**：删除 PlayerController 组件，重新添加
3. **检查脚本**：确保 `PlayerController.cs` 文件没有编译错误
4. **重启 Unity**：有时需要重启 Unity 编辑器

---

**记住**：最重要的是检查 **Ground Layer** 设置！如果设置为 `Nothing`，永远检测不到地面！🎮

